<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <!-- Bootstrap CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-hover-dropdown/2.2.1/bootstrap-hover-dropdown.js" rel="stylesheet">
    <title>YIIAQ</title>
</head>

<body>

<nav class="navbar navbar-expand-lg static-top">
    <div class="container">
        <a class="navbar-brand" href="#">
            <img class="logo3" src="../../../IMG/logo3.png" alt="">
        </a>

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>



        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="Home">Accueil</a>
                </li>

                <li class="nav-item">
                    <div class="dropdown">
                        <button class="dropbtn">Alertes
                            <i class="fa fa-caret-down"></i>
                        </button>

                        <div class="dropdown-content">
                            <a href="Create_Alerte">Créer une alerte</a>
                            <a href="Historique_Alerte">Historique des alertes</a>
                            <a href="Alertes_Utilisateurs">Alertes Utilisateurs</a>
                        </div>
                    </div>
                </li>
                <li class="nav-item ">
                    <div class="dropdown">
                        <button class="nav-item dropbtn"> Mes favoris
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-content">
                            <a href="Add_Favoris">Ajouter un favori</a>
                            <a href="Liste_Favoris">Liste des favoris</a>
                        </div>

                    </div>
                </li>

                <li class="nav-item ">
                    <div class="dropdown">
                        <button class="nav-item dropbtn"> Formulaire
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-content">
                            <a href="Stats_Formulaire">Statistiques du formulaire</a>
                            <a href="formulaire">Répondre au formulaire</a>
                        </div>
                    </div>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="Gestion_Admin">Administrateurs</a>
                </li>

                <li class="nav-item ">
                    <a class="nav-link" href="Capteur">Capteurs</a>
                </li>

                <li>
                    <a type="button" class="btn btn-danger btn-block bouton" href="Deconnexion"> Déconnexion </a>
                </li>
            </ul>
        </div>
    </div>
</nav>


<!-- Page Content -->
<div class="container">
    <br/><br/>
    <!-- BARRE DE RECHERCHE  -->
    <div class="row form-group">

        <section class="col-md-10">
            <form action="" method="post">
                <input type="search" placeholder="Rechercher d'autres salles" class="form-control" id="text_searched" name="text_searched" />
            </form>
        </section>
    </div>

    <!-- Entête avec nom de la salle, du campus et du bâtiment -->
    <section class="row form-group" th:each="salle:${campus_with_the_selected_salle.getList_salles()}">
        <!-- Search form -->

        <div class="col-xs-3 col-sm-2 col-md-2">
            <h3 class="display-3" th:text="${campus_with_the_selected_salle.campus_name}">HEI </h3>
        </div>
        <div class="col-xs-3 col-sm-4 col-md-4">
            <h3 class="display-3" th:text="${salle.salle_name}">S213</h3>
        </div>
        <div class="col-xs-3 col-sm-4 col-md-6">
            <h4 class="display-6" th:text="'Salle Bâtiment ' + ${salle.batiment_name} + ' - au ' + ${salle.etage_name}"> Salle Bâtiment Ségard - au 2ème étage</h4>
        </div>
        <p>Choisisez l'intervalle de temps pour la représentation des graphiques: </p>
    </section>

    <!-- FORMULAIRE POUR CHOISIR L'INTERVALLE DE TEMPS DES GRAPHIQUES   +  COEUR POUR AJOUTER AUX FAVORIS -->
    <div class="row">
        <div class="col-xs-9 col-sm-9 col-md-9">

        <form method="get" id="form_for_graph_dates" class="form-inline">
                <div class="form-group">
                    <input type="hidden"  th:each="salle:${campus_with_the_selected_salle.getList_salles()}" th:value="${salle.getId()}" name="id_selected_salle">
                </div>
<!--                Date heure début-->
                <div class="form-group">
                    <label for="debut_graph_date" style="font-size: 30px; padding-bottom: 12px;">Du</label>
                    <input type="date" class="form-control" id="debut_graph_date" name="debut_graph_date" max="2021-01-01" min="2020-01-01"  th:value="${debut_graph_date}" style="margin: 0 5px 15px 5px;">
                </div>
                <div class="form-group">
                    <label for="debut_graph_heure" style="font-size: 30px; padding-bottom: 12px;">à</label>
                    <input type="time" class="form-control" id="debut_graph_heure" name="debut_graph_heure"  th:value="${debut_graph_heure}" style="margin: 0 5px 15px 5px;">
                </div>
<!--                Date heure fin-->
                <div class="form-group">
                    <label for="fin_graph_date" style="font-size: 30px; padding-bottom: 12px;">Au</label>
                    <input type="date" class="form-control" id="fin_graph_date" name="fin_graph_date" max="2021-01-01" min="2020-01-01"  th:value="${fin_graph_date}" style="margin: 0 5px 15px 5px;">
                </div>
                <div class="form-group">
                    <label for="fin_graph_heure" style="font-size: 30px; padding-bottom: 12px;">à</label>
                    <input type="time" class="form-control" id="fin_graph_heure" name="fin_graph_heure"  th:value="${fin_graph_heure}" style="margin: 0 5px 15px 15px; ">
                </div>
            <button id="valider_info_date" name="valider_info_date" style="margin:0px 5px 15px 15px;"class="btn btn-secondary form-control" type="submit" form="form_for_graph_dates" >Valider</button>
        </form>
        </div>

<!--    <div class="col-xs-1 col-sm-1 col-md-1">-->
<!--        </div>-->

        <div class="col-xs-3 col-sm-3 col-md-3">
            <i class="heart fa fa-heart-o" id="coeur_favori"></i>
            <span style="font-size: 20px;height:200px;vertical-align:text-top;line-height: 0px;">Ajouter au favori</span>
        </div>
    </div>

    <!-- CSS POUR LES COEUR DES FAVORIS -->
    <style type="text/css">

        .heart {
            font-size: 45px;
            color:red;
        }
    </style>

    <!-- SCRIPT POUR CHANGER LE COEUR DES FAVORIS (Toggle class revisité) -->
    <script type="text/javascript" th:inline="javascript" th:each="salle:${campus_with_the_selected_salle.getList_salles()}">


        /*<![CDATA[*/
        function post(params) {
            var method='post';
            // The rest of this code assumes you are not using a library.
            // It can be made less wordy if you use one.
            var form = document.createElement('form');
            form.method = method;
            // form.action = path;

            for (var key in params) {
                if (params.hasOwnProperty(key)) {
                    var hiddenField = document.createElement('input');
                    hiddenField.type = 'hidden';
                    hiddenField.name = key;
                    hiddenField.value = params[key];
                    form.appendChild(hiddenField);
                }
            }
            document.body.appendChild(form);
            form.submit();
        }

        $(document).ready(function(){
            var text=  '[[${ajouter_ou_supprimer}]]';//$('#coeur_favori').text(); // Ici mettre un paramètre de la servlet
            var coeur = document.getElementById('coeur_favori');
            if(text.includes("Supprimer")){
                coeur.className = 'heart fa fa-heart';
            } else{
                coeur.className = 'heart fa fa-heart-o';
            }
            $('#coeur_favori').on('click', function () {
                if(text.includes("Supprimer")){
                    post({switch_favori: 'del', salle_id:'[[${salle.getId()}]]'});
                } else{
                    post({switch_favori: 'add', salle_id:'[[${salle.getId()}]]'});
                }
            });
        });
        /*]]>*/
    </script>


    <br/>
    <br/>
    <p style="text-align: center;">_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _</p>
    <br/>
    <br/>

    <!-- TOUS LES ELEMENTS MESUREES PAR LES CAPTEURS  -->
    <section class="row form-group">

<!--LIGNE 1 (2 éléments) -->
        <div class="col-xs-2 col-sm-2 col-md-2"> </div>

        <!-- Element Luminosity  -->
        <div class="col-xs-4 col-sm-3 col-md-3" style="margin-bottom : 50px;" >
            <section class="row">

                <div class="col-xs-6 col-sm-6 col-md-6 logo_img hover01" data-toggle="modal" data-target="#luminosityModal"><a>
                    <img src="../../../IMG/luminosity_v3.png" alt="Luminosity" align="right">
                </a></div>


                <div class="col-xs-6 col-sm-6 col-md-6">
                    <section class="row">
                        <b>Lum.</b>
                    </section>

                    <section class="row">
                        <p th:text="${actual_sensors_info.getLight()} + ' lux'">125lux</p>
                    </section>
                </div>

            </section>
        </div>


        <div class="col-xs-1 col-sm-1 col-md-1"></div>

        <!-- Element PM2.5  -->
        <div class="col-xs-4 col-sm-3 col-md-3">
            <section class="row">

                <div class="col-xs-6 col-sm-6 col-md-6 logo_img hover01" data-toggle="modal" data-target="#pm2_5Modal"><a>
                    <img src="../../../IMG/pm2.5_v3.jpg" alt="PM2,5" align="right">
                </a></div>

                <div class="col-xs-6 col-sm-6 col-md-6">
                    <section class="row">
                        <b>PM2.5</b>
                    </section>

                    <section class="row">
                        <p th:text="${actual_sensors_info.getDust() + ' ppb'}">0.11ppb</p>
                    </section>
                </div>

            </section>
        </div>
        <div class="col-xs-2 col-sm-2 col-md-2"> </div>

        <br/>
<!--LIGNE 2 (3 éléments) -->
        <!-- Element Decibels -->
        <div class="col-xs-4 col-sm-3 col-md-3">

            <section class="row">

                <div class="col-xs-6 col-sm-6 col-md-6 logo_img hover01" data-toggle="modal" data-target="#decibelModal">
                    <a>
                        <img src="../../../IMG/son_v3.png" alt="Son" align="right">
                    </a>
                </div>
                <div class="col-xs-6 col-sm-6 col-md-6 logo_text">
                    <section class="row">
                        <b>CO2</b>
                    </section>
                    <section class="row">
                        <p th:text="${actual_sensors_info.getSound()} + ' Db'">53 Db</p>
                    </section>
                </div>

            </section>
        </div>

        <!-- Element Temperature  -->
        <div class="col-xs-4 col-sm-3 col-md-4">
            <section class="row">

                <div class="col-xs-6 col-sm-6 col-md-6 hover01 column" data-toggle="modal" data-target="#temperatureModal"><a>
                    <img src="../../../IMG/hot_v3.png"  alt="Temperature" align="right"></a>
                </div>
                <div class="col-xs-6 col-sm-6 col-md-6 logo_text">
                    <section class="row">
                        <b>Temp.</b>
                    </section>

                    <section class="row">
                        <p th:text="${actual_sensors_info.getTemperature() + '°C'}">25°C</p>
                    </section>
                </div>

            </section>
        </div>


        <!-- Element Humidity  -->
        <div class="col-xs-4 col-sm-3 col-md-4" style="margin-bottom : 90px;">
            <section class="row">

                <div class="col-xs-6 col-sm-6 col-md-6 logo_img hover01" data-toggle="modal" data-target="#humidityModal"><a>
                    <img src="../../../IMG/humidity_v3.png" alt="Humidity" align="right">
                </a></div>
                <div class="col-xs-6 col-sm-6 col-md-6 logo_text">
                    <section class="row">
                        <b>Hum.</b>
                    </section>

                    <section class="row">
                        <p th:text="${actual_sensors_info.getHumid() + '%'}">7%</p>
                    </section>
                </div>
            </section>
        </div>

        <br/>


<!--        LIGNE 3  (3 éléments) -->
        <!-- Element CO2 -->
        <div class="col-xs-4 col-sm-3 col-md-3">

            <section class="row">

                <div class="col-xs-6 col-sm-6 col-md-6 logo_img hover01" data-toggle="modal" data-target="#co2Modal">
                    <a>
                        <img src="../../../IMG/co!.png" style="width: 70%;" alt="CO2" align="right">
                    </a>
                </div>
                <div class="col-xs-6 col-sm-6 col-md-6 logo_text">
                    <section class="row">
                        <b>CO2</b>
                    </section>
                    <section class="row">
                        <p th:text="${actual_sensors_info.getCO2()} + ' ppm'">458ppm</p>
                    </section>
                </div>

            </section>
        </div>

        <!-- Element CO  -->
        <div class="col-xs-4 col-sm-3 col-md-4">
            <section class="row">

                <div class="col-xs-6 col-sm-6 col-md-6 hover01 column" data-toggle="modal" data-target="#monoxydeModal"><a>
                    <img src="../../../IMG/co_v3.png" style="width: 50%;" alt="CO" align="right"></a>
                </div>
                <div class="col-xs-6 col-sm-6 col-md-6 logo_text">
                    <section class="row">
                        <b>CO</b>
                    </section>

                    <section class="row">
                        <p>450 ppm</p>
                    </section>
                </div>

            </section>
        </div>

        <!-- Element Benzène  -->
        <div class="col-xs-4 col-sm-3 col-md-4" style="margin-bottom : 90px;">
            <section class="row">

                <div class="col-xs-6 col-sm-6 col-md-6 logo_img hover01" data-toggle="modal" data-target="#benzeneModal"><a>
                    <img src="../../../IMG/benzene.png" style="width: 40%;" alt="Benzene" align="right">
                </a></div>
                <div class="col-xs-6 col-sm-6 col-md-6 logo_text">
                    <section class="row">
                        <b>Benzene</b>
                    </section>

                    <section class="row">
                        <p>0,2 ppb</p>
                    </section>
                </div>


            </section>
        </div>

        <br/>

<!--        LIGNE 4 (2 éléments) -->
        <div class="col-xs-2 col-sm-2 col-md-2"> </div>

<!--        ELEMENT TOLU-->
        <div class="col-xs-4 col-sm-3 col-md-3" style="margin-bottom : 50px;" >
            <section class="row">
                <div class="col-xs-6 col-sm-6 col-md-6 logo_img hover01" data-toggle="modal" data-target="#toluModal">
                    <a>
                     <img src="../../../IMG/tolu_v3.jpg" style="width: 60%; " alt="Tolu" align="right">
                   </a>
                </div>

                <div class="col-xs-6 col-sm-6 col-md-6">
                    <section class="row">
                        <b>Tolu</b>
                    </section>

                    <section class="row">
                        <p>450 ppm</p>
                    </section>
                </div>

            </section>
        </div>

        <div class="col-xs-1 col-sm-1 col-md-1"></div>

        <!-- Element Formol -->
        <div class="col-xs-4 col-sm-3 col-md-3">
            <section class="row">

                <div class="col-xs-6 col-sm-6 col-md-6 logo_img hover01" data-toggle="modal" data-target="#formolModal"><a>
                    <img src="../../../IMG/formol.png" style="width: 65%;" alt="Formol" align="right">
                </a></div>


                <div class="col-xs-6 col-sm-6 col-md-6">
                    <section class="row">
                        <b>Formol</b>
                    </section>

                    <section class="row">
                        <p>0.11 ppm</p>
                    </section>
                </div>

            </section>
        </div>
        <div class="col-xs-2 col-sm-2 col-md-2"> </div>

    </section>

    <br/>
    <p style="text-align: center;">_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _</p>
    <br/>
    <br/>



<!--    VISUALISATION DES GRAPH-->
<!--    CDN POUR FAIRE LES GRAPH AVEC D3.JS-->
    <script src = "https://d3js.org/d3.v4.min.js"></script>

    <!-- LA MODALE TEMPERATURE -->
    <div class="modal fade" id="temperatureModal" tabindex="-1" role="dialog" aria-labelledby="temperatureModalTitle" aria-hidden="true">
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="temperatureModalTitle">Temperature en fonction du temps:</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <svg width="1800" height="800" id="svg_temperature_modal">

                    </svg>

                </div>

            </div>
        </div>
    </div>
    <!-- SCRIPT TEMPERATURE GRAPH D3.JS-->
    <script th:inline="javascript">

        const svg = d3.select('#svg_temperature_modal');

        const width = +svg.attr("width");
        const height = +svg.attr("height");

        const render = data => {


            // TEMPERATURE PLOT
            const globalTitlePlot1 = "Evolution de la Température";
            const yAxisLable_Plot1 = "Température";
            const yValue_Plot1 = d => d.Temperatures;
            const xValue_Plot1 = d => d.Time;

            const circleRadius = 0;
            const xAxisLable_Plot1 = "Time";

            const global_margin = { top:60, bottom:140, left:150, right:25};
            const marginLeftPlot = { top:0, bottom:0, left:0, right:80};


            const innerHeight = height - global_margin.top - global_margin.bottom;
            const innerWidth = width - global_margin.left - global_margin.right;


            // SCALES FOR LEFT PLOT
            const xScale_Plot1 = d3.scaleTime()
                .domain(d3.extent(data, xValue_Plot1))
                .range([0, innerWidth/2 - marginLeftPlot.right - marginLeftPlot.left])
                .nice();

            const yScale_Plot1 = d3.scaleLinear()
                .domain(d3.extent(data, yValue_Plot1))
                .range([innerHeight, 0])
                .nice();
            // ----------------------------------


            const g = svg.append('g')
                .attr('transform', `translate(${global_margin.left}, ${global_margin.top})`);


            // AXIS FOR PLOT 1
            const xAxis_Plot1 = d3.axisBottom(xScale_Plot1)
                .tickSize(-innerHeight)
                .tickPadding(20);

            const yAxis_Plot1 = d3.axisLeft(yScale_Plot1)
                .tickSize(-innerWidth/2 + marginLeftPlot.right);
            // ---------------------------------------------


            const temperaturePlotGroup = g.append('g');

            temperaturePlotGroup
                .append("rect")
                .attr("x",0)
                .attr("y",0)
                .attr("height", height-200)
                .attr("width", innerWidth/2 - 70)
                .style("fill", "whitesmoke");



            // AXIS GROUP FOR LEFT PLOT
            const yAxisGroupLeftPlot = temperaturePlotGroup.append('g').call(yAxis_Plot1);
            yAxisGroupLeftPlot
                .selectAll('.domain')
                .remove();

            yAxisGroupLeftPlot.append('text')
                .attr('class', 'xAxisLabel')
                .attr('x',-innerHeight/2)
                .attr('y', -80)
                .attr('fill', 'black')
                .attr('transform', 'rotate(-90)')
                .attr('text-anchor', 'middle')
                .text(yAxisLable_Plot1);

            const xAxisGroupLeftPlot = temperaturePlotGroup.append('g').call(xAxis_Plot1)
                .attr('transform', `translate(0, ${innerHeight})`);
            xAxisGroupLeftPlot.select('.domain').remove();

            xAxisGroupLeftPlot.append('text')
                .attr('class', 'xAxisLabel')
                .attr('x', innerWidth/4)
                .attr('y', 80)
                .attr('fill', 'black')
                .text(xAxisLable_Plot1);
// -----------------------------------


// LINE GENERATOR FOR THE LEFT PLOT
            const lineGeneratorLeftPlot = d3.line()
                .x(d => xScale_Plot1(xValue_Plot1(d)))
                .y(d => yScale_Plot1(yValue_Plot1(d)))
                .curve(d3.curveBasis);

            temperaturePlotGroup.append('path')
                .attr('class', 'line_path_left_plot')
                .attr('d', lineGeneratorLeftPlot(data));

            temperaturePlotGroup.selectAll('rect').data(data)
                .enter().append('circle')
                .attr('cy', d => yScale_Plot1(yValue_Plot1(d)))
                .attr('cx', d => xScale_Plot1(xValue_Plot1(d)))
                .attr('r', circleRadius);

            temperaturePlotGroup.append('text')
                .attr('class', 'title')
                .text(globalTitlePlot1)
                .attr('y', -10);
            // ---------------------------------


        };



        const data_json = '[(${array_of_all_sensors_info})]';

        const json = JSON.parse(data_json);

        json.forEach(function(element, index) {
            element.Time = new Date(element['time_info_collected']);
            element.Temperatures = +element['temperature'];
            element.Humidite = +element['humid'];

            delete element['time_info_collected'];
            delete element['temperature'];
            delete element['humid'];
        });

        render(json);

    </script>

    <!-- LA MODALE HUMIDITY -->
    <div class="modal fade" id="humidityModal" tabindex="-1" role="dialog" aria-labelledby="humidityModalTitle" aria-hidden="true">
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="humidityModalTitle">Humidité en fonction du temps:</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <svg width="1800" height="800" id="svg_humidity_modal">

                    </svg>

                </div>

            </div>
        </div>
    </div>
    <!-- SCRIPT HUMIDITY GRAPH D3.JS-->
    <script th:inline="javascript">

        const svg_humidity = d3.select('#svg_humidity_modal');

        const width_humidity = +svg_humidity.attr("width");
        const height_humidity = +svg_humidity.attr("height");

        const render_humidity = data => {


            // HUMIDITY PLOT
            const globalTitlePlot1_humidity = "Evolution de l'Humidité";
            const yAxisLable_Plot1_humidity = "Humidité (%)";
            const yValue_Plot1_humidity = d => d.Humidite;
            const xValue_Plot1_humidity = d => d.Time;

            const circleRadius_humidity = 0;
            const xAxisLable_Plot1_humidity = "Time";

            const global_margin_humidity = { top:60, bottom:140, left:150, right:25};
            const marginLeftPlot_humidity = { top:0, bottom:0, left:0, right:80};


            const innerHeight_humidity = height_humidity - global_margin_humidity.top - global_margin_humidity.bottom;
            const innerWidth_humidity = width_humidity - global_margin_humidity.left - global_margin_humidity.right;


            // SCALES FOR LEFT PLOT
            const xScale_Plot1_humidity = d3.scaleTime()
                .domain(d3.extent(data, xValue_Plot1_humidity))
                .range([0, innerWidth_humidity/2 - marginLeftPlot_humidity.right - marginLeftPlot_humidity.left])
                .nice();

            const yScale_Plot1_humidity = d3.scaleLinear()
                .domain(d3.extent(data, yValue_Plot1_humidity))
                .range([innerHeight_humidity, 0])
                .nice();
            // ----------------------------------


            const g_humidity = svg_humidity.append('g')
                .attr('transform', `translate(${global_margin_humidity.left}, ${global_margin_humidity.top})`);


            // AXIS FOR PLOT 1
            const xAxis_Plot1_humidity = d3.axisBottom(xScale_Plot1_humidity)
                .tickSize(-innerHeight_humidity)
                .tickPadding(20);

            const yAxis_Plot1_humidity = d3.axisLeft(yScale_Plot1_humidity)
                .tickSize(-innerWidth_humidity/2 + marginLeftPlot_humidity.right);
            // ---------------------------------------------


            const humidityPlotGroup = g_humidity.append('g');

            humidityPlotGroup
                .append("rect")
                .attr("x",0)
                .attr("y",0)
                .attr("height", height-200)
                .attr("width", innerWidth/2 - 70)
                .style("fill", "whitesmoke");



            // AXIS GROUP FOR LEFT PLOT
            const yAxisGroupLeftPlot_humidity = humidityPlotGroup.append('g').call(yAxis_Plot1_humidity);
            yAxisGroupLeftPlot_humidity
                .selectAll('.domain')
                .remove();

            yAxisGroupLeftPlot_humidity.append('text')
                .attr('class', 'xAxisLabel')
                .attr('x',-innerHeight_humidity/2)
                .attr('y', -80)
                .attr('fill', 'black')
                .attr('transform', 'rotate(-90)')
                .attr('text-anchor', 'middle')
                .text(yAxisLable_Plot1_humidity);

            const xAxisGroupLeftPlot_humidity = humidityPlotGroup.append('g').call(xAxis_Plot1_humidity)
                .attr('transform', `translate(0, ${innerHeight_humidity})`);
            xAxisGroupLeftPlot_humidity.select('.domain').remove();

            xAxisGroupLeftPlot_humidity.append('text')
                .attr('class', 'xAxisLabel')
                .attr('x', innerWidth_humidity/4)
                .attr('y', 80)
                .attr('fill', 'black')
                .text(xAxisLable_Plot1_humidity);
// -----------------------------------


// LINE GENERATOR FOR THE LEFT PLOT
            const lineGeneratorLeftPlot_humidity = d3.line()
                .x(d => xScale_Plot1_humidity(xValue_Plot1_humidity(d)))
                .y(d => yScale_Plot1_humidity(yValue_Plot1_humidity(d)))
                .curve(d3.curveBasis);

            humidityPlotGroup.append('path')
                .attr('class', 'line_path_left_plot')
                .attr('d', lineGeneratorLeftPlot_humidity(data));

            humidityPlotGroup.selectAll('rect').data(data)
                .enter().append('circle')
                .attr('cy', d => yScale_Plot1_humidity(yValue_Plot1_humidity(d)))
                .attr('cx', d => xScale_Plot1_humidity(xValue_Plot1_humidity(d)))
                .attr('r', circleRadius_humidity);

            humidityPlotGroup.append('text')
                .attr('class', 'title')
                .text(globalTitlePlot1_humidity)
                .attr('y', -10);
            // ---------------------------------


        };



        const data_json_humidity = '[(${array_of_all_sensors_info})]';

        const json_humidity = JSON.parse(data_json_humidity);

        json_humidity.forEach(function(element, index) {
            element.Time = new Date(element['time_info_collected']);
            element.Temperatures = +element['temperature'];
            element.Humidite = +element['humid'];

            delete element['time_info_collected'];
            delete element['temperature'];
            delete element['humid'];
        });

        render_humidity(json_humidity);

    </script>

    <!-- LA MODALE CO2 -->
    <div class="modal fade" id="co2Modal" tabindex="-1" role="dialog" aria-labelledby="co2ModalTitle" aria-hidden="true">
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="co2ModalTitle">Concentration de CO2 en fonction du temps:</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <svg width="1800" height="800" id="svg_co2_modal">

                    </svg>

                </div>

            </div>
        </div>
    </div>
    <!-- SCRIPT CO2 GRAPH D3.JS-->
    <script th:inline="javascript">

        const svg_CO2 = d3.select('#svg_co2_modal');

        const width_CO2 = +svg_CO2.attr("width");
        const height_CO2 = +svg_CO2.attr("height");

        const render_CO2 = data => {


            // TEMPERATURE PLOT
            const globalTitlePlot1_CO2 = "Evolution du CO2";
            const yAxisLable_Plot1_CO2 = "CO2 (ppm)";
            const yValue_Plot1_CO2 = d => d.CO2;
            const xValue_Plot1_CO2 = d => d.Time;

            const circleRadius_CO2 = 0;
            const xAxisLable_Plot1_CO2 = "Time";

            const global_margin_CO2 = { top:60, bottom:140, left:150, right:25};
            const marginLeftPlot_CO2 = { top:0, bottom:0, left:0, right:80};


            const innerHeight_CO2 = height_CO2 - global_margin_CO2.top - global_margin_CO2.bottom;
            const innerWidth_CO2 = width_CO2 - global_margin_CO2.left - global_margin_CO2.right;


            // SCALES FOR LEFT PLOT
            const xScale_Plot1_CO2 = d3.scaleTime()
                .domain(d3.extent(data, xValue_Plot1_CO2))
                .range([0, innerWidth_CO2/2 - marginLeftPlot_CO2.right - marginLeftPlot_CO2.left])
                .nice();

            const yScale_Plot1_CO2 = d3.scaleLinear()
                .domain(d3.extent(data, yValue_Plot1_CO2))
                .range([innerHeight_CO2, 0])
                .nice();
            // ----------------------------------


            const g_CO2 = svg_CO2.append('g')
                .attr('transform', `translate(${global_margin_CO2.left}, ${global_margin_CO2.top})`);


            // AXIS FOR PLOT 1
            const xAxis_Plot1_CO2 = d3.axisBottom(xScale_Plot1_CO2)
                .tickSize(-innerHeight_CO2)
                .tickPadding(20);

            const yAxis_Plot1_CO2 = d3.axisLeft(yScale_Plot1_CO2)
                .tickSize(-innerWidth_CO2/2 + marginLeftPlot_CO2.right);
            // ---------------------------------------------


            const temperaturePlotGroup_CO2 = g_CO2.append('g');

            temperaturePlotGroup_CO2
                .append("rect")
                .attr("x",0)
                .attr("y",0)
                .attr("height", height_CO2-200)
                .attr("width", innerWidth_CO2/2 - 70)
                .style("fill", "whitesmoke");



            // AXIS GROUP FOR LEFT PLOT
            const yAxisGroupLeftPlot_CO2 = temperaturePlotGroup_CO2.append('g').call(yAxis_Plot1_CO2);
            yAxisGroupLeftPlot_CO2
                .selectAll('.domain')
                .remove();

            yAxisGroupLeftPlot_CO2.append('text')
                .attr('class', 'xAxisLabel')
                .attr('x',-innerHeight_CO2/2)
                .attr('y', -80)
                .attr('fill', 'black')
                .attr('transform', 'rotate(-90)')
                .attr('text-anchor', 'middle')
                .text(yAxisLable_Plot1_CO2);

            const xAxisGroupLeftPlot_CO2 = temperaturePlotGroup_CO2.append('g').call(xAxis_Plot1_CO2)
                .attr('transform', `translate(0, ${innerHeight_CO2})`);
            xAxisGroupLeftPlot_CO2.select('.domain').remove();

            xAxisGroupLeftPlot_CO2.append('text')
                .attr('class', 'xAxisLabel')
                .attr('x', innerWidth_CO2/4)
                .attr('y', 80)
                .attr('fill', 'black')
                .text(xAxisLable_Plot1_CO2);
// -----------------------------------


// LINE GENERATOR FOR THE LEFT PLOT
            const lineGeneratorLeftPlot_CO2 = d3.line()
                .x(d => xScale_Plot1_CO2(xValue_Plot1_CO2(d)))
                .y(d => yScale_Plot1_CO2(yValue_Plot1_CO2(d)))
                .curve(d3.curveBasis);

            temperaturePlotGroup_CO2.append('path')
                .attr('class', 'line_path_left_plot')
                .attr('d', lineGeneratorLeftPlot_CO2(data));

            temperaturePlotGroup_CO2.selectAll('rect').data(data)
                .enter().append('circle')
                .attr('cy', d => yScale_Plot1_CO2(yValue_Plot1_CO2(d)))
                .attr('cx', d => xScale_Plot1_CO2(xValue_Plot1_CO2(d)))
                .attr('r', circleRadius_CO2);

            temperaturePlotGroup_CO2.append('text')
                .attr('class', 'title')
                .text(globalTitlePlot1_CO2)
                .attr('y', -10);
            // ---------------------------------


        };



        const data_json_CO2 = '[(${array_of_all_sensors_info})]';

        const json_CO2 = JSON.parse(data_json_CO2);

        json_CO2.forEach(function(element, index) {
            element.Time = new Date(element['time_info_collected']);
            element.Temperatures = +element['temperature'];
            element.Humidite = +element['humid'];
            element.CO2 = +element['CO2_'];

            delete element['time_info_collected'];
            delete element['temperature'];
            delete element['humid'];
            delete element['CO2_'];
        });

        render_CO2(json_CO2);

    </script>

    <!-- LA MODALE LUMINOSITY -->
    <div class="modal fade" id="luminosityModal" tabindex="-1" role="dialog" aria-labelledby="luminosityModalTitle" aria-hidden="true">
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="luminosityModalTitle">Evolution de la Luminosité en fonction du temps:</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <svg width="1800" height="800" id="svg_luminosity_modal">

                    </svg>

                </div>

            </div>
        </div>
    </div>
    <!-- SCRIPT LUMINOSITY GRAPH D3.JS-->
    <script th:inline="javascript">

        const svg_luminosity = d3.select('#svg_luminosity_modal');

        const width_luminosity = +svg_luminosity.attr("width");
        const height_luminosity = +svg_luminosity.attr("height");

        const render_luminosity = data => {


            // TEMPERATURE PLOT
            const globalTitlePlot1_luminosity = "Evolution de la Luminosité";
            const yAxisLable_Plot1_luminosity = "Luminosité (Lux)";
            const yValue_Plot1_luminosity = d => d.Luminosity;
            const xValue_Plot1_luminosity = d => d.Time;

            const circleRadius_luminosity = 0;
            const xAxisLable_Plot1_luminosity = "Time";

            const global_margin_luminosity = { top:60, bottom:140, left:150, right:25};
            const marginLeftPlot_luminosity = { top:0, bottom:0, left:0, right:80};


            const innerHeight_luminosity = height_luminosity - global_margin_luminosity.top - global_margin_luminosity.bottom;
            const innerWidth_luminosity = width_luminosity - global_margin_luminosity.left - global_margin_luminosity.right;


            // SCALES FOR LEFT PLOT
            const xScale_Plot1_luminosity = d3.scaleTime()
                .domain(d3.extent(data, xValue_Plot1_luminosity))
                .range([0, innerWidth_luminosity/2 - marginLeftPlot_luminosity.right - marginLeftPlot_luminosity.left])
                .nice();

            const yScale_Plot1_luminosity = d3.scaleLinear()
                .domain(d3.extent(data, yValue_Plot1_luminosity))
                .range([innerHeight_luminosity, 0])
                .nice();
            // ----------------------------------


            const g_luminosity = svg_luminosity.append('g')
                .attr('transform', `translate(${global_margin_luminosity.left}, ${global_margin_luminosity.top})`);


            // AXIS FOR PLOT 1
            const xAxis_Plot1_luminosity = d3.axisBottom(xScale_Plot1_luminosity)
                .tickSize(-innerHeight_luminosity)
                .tickPadding(20);

            const yAxis_Plot1_luminosity = d3.axisLeft(yScale_Plot1_luminosity)
                .tickSize(-innerWidth_luminosity/2 + marginLeftPlot_luminosity.right);
            // ---------------------------------------------


            const temperaturePlotGroup_luminosity = g_luminosity.append('g');

            temperaturePlotGroup_luminosity
                .append("rect")
                .attr("x",0)
                .attr("y",0)
                .attr("height", height_luminosity-200)
                .attr("width", innerWidth_luminosity/2 - 70)
                .style("fill", "whitesmoke");



            // AXIS GROUP FOR LEFT PLOT
            const yAxisGroupLeftPlot_luminosity = temperaturePlotGroup_luminosity.append('g').call(yAxis_Plot1_luminosity);
            yAxisGroupLeftPlot_luminosity
                .selectAll('.domain')
                .remove();

            yAxisGroupLeftPlot_luminosity.append('text')
                .attr('class', 'xAxisLabel')
                .attr('x',-innerHeight_luminosity/2)
                .attr('y', -80)
                .attr('fill', 'black')
                .attr('transform', 'rotate(-90)')
                .attr('text-anchor', 'middle')
                .text(yAxisLable_Plot1_luminosity);

            const xAxisGroupLeftPlot_luminosity = temperaturePlotGroup_luminosity.append('g').call(xAxis_Plot1_luminosity)
                .attr('transform', `translate(0, ${innerHeight_luminosity})`);
            xAxisGroupLeftPlot_luminosity.select('.domain').remove();

            xAxisGroupLeftPlot_luminosity.append('text')
                .attr('class', 'xAxisLabel')
                .attr('x', innerWidth_luminosity/4)
                .attr('y', 80)
                .attr('fill', 'black')
                .text(xAxisLable_Plot1_luminosity);
// -----------------------------------


// LINE GENERATOR FOR THE LEFT PLOT
            const lineGeneratorLeftPlot_luminosity = d3.line()
                .x(d => xScale_Plot1_luminosity(xValue_Plot1_luminosity(d)))
                .y(d => yScale_Plot1_luminosity(yValue_Plot1_luminosity(d)))
                .curve(d3.curveBasis);

            temperaturePlotGroup_luminosity.append('path')
                .attr('class', 'line_path_left_plot')
                .attr('d', lineGeneratorLeftPlot_luminosity(data));

            temperaturePlotGroup_luminosity.selectAll('rect').data(data)
                .enter().append('circle')
                .attr('cy', d => yScale_Plot1_luminosity(yValue_Plot1_luminosity(d)))
                .attr('cx', d => xScale_Plot1_luminosity(xValue_Plot1_luminosity(d)))
                .attr('r', circleRadius_luminosity);

            temperaturePlotGroup_luminosity.append('text')
                .attr('class', 'title')
                .text(globalTitlePlot1_luminosity)
                .attr('y', -10);
            // ---------------------------------


        };



        const data_json_luminosity = '[(${array_of_all_sensors_info})]';

        const json_luminosity = JSON.parse(data_json_luminosity);

        json_luminosity.forEach(function(element, index) {
            element.Time = new Date(element['time_info_collected']);
            element.Temperatures = +element['temperature'];
            element.Humidite = +element['humid'];
            element.Luminosity = +element['light'];

            delete element['time_info_collected'];
            delete element['temperature'];
            delete element['humid'];
            delete element['light'];
        });

        render_luminosity(json_luminosity);

    </script>

    <!-- LA MODALE PM2.5 -->
    <div class="modal fade" id="pm2_5Modal" tabindex="-1" role="dialog" aria-labelledby="pm2_5ModalTitle" aria-hidden="true">
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="pm2_5ModalTitle">Concentration de Particules PM2.5 en fonction du temps:</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <svg width="1800" height="800" id="svg_pm2_5_modal">

                    </svg>

                </div>

            </div>
        </div>
    </div>
    <!-- SCRIPT PM2.5 GRAPH D3.JS-->
    <script th:inline="javascript">

        const svg_PM2_5 = d3.select('#svg_pm2_5_modal');

        const width_PM2_5 = +svg_PM2_5.attr("width");
        const height_PM2_5 = +svg_PM2_5.attr("height");

        const render_PM2_5 = data => {


            // TEMPERATURE PLOT
            const globalTitlePlot1_PM2_5 = "Evolution de la quantité de PM2.5";
            const yAxisLable_Plot1_PM2_5 = "PM 2.5 (ppb)";
            const yValue_Plot1_PM2_5 = d => d.PM2_5;
            const xValue_Plot1_PM2_5 = d => d.Time;

            const circleRadius_PM2_5 = 0;
            const xAxisLable_Plot1_PM2_5 = "Time";

            const global_margin_PM2_5 = { top:60, bottom:140, left:150, right:25};
            const marginLeftPlot_PM2_5 = { top:0, bottom:0, left:0, right:80};


            const innerHeight_PM2_5 = height_PM2_5 - global_margin_PM2_5.top - global_margin_PM2_5.bottom;
            const innerWidth_PM2_5 = width_PM2_5 - global_margin_PM2_5.left - global_margin_PM2_5.right;


            // SCALES FOR LEFT PLOT
            const xScale_Plot1_PM2_5 = d3.scaleTime()
                .domain(d3.extent(data, xValue_Plot1_PM2_5))
                .range([0, innerWidth_PM2_5/2 - marginLeftPlot_PM2_5.right - marginLeftPlot_PM2_5.left])
                .nice();

            const yScale_Plot1_PM2_5 = d3.scaleLinear()
                .domain(d3.extent(data, yValue_Plot1_PM2_5))
                .range([innerHeight_PM2_5, 0])
                .nice();
            // ----------------------------------


            const g_PM2_5 = svg_PM2_5.append('g')
                .attr('transform', `translate(${global_margin_PM2_5.left}, ${global_margin_PM2_5.top})`);


            // AXIS FOR PLOT 1
            const xAxis_Plot1_PM2_5 = d3.axisBottom(xScale_Plot1_PM2_5)
                .tickSize(-innerHeight_PM2_5)
                .tickPadding(20);

            const yAxis_Plot1_PM2_5 = d3.axisLeft(yScale_Plot1_PM2_5)
                .tickSize(-innerWidth_PM2_5/2 + marginLeftPlot_PM2_5.right);
            // ---------------------------------------------


            const temperaturePlotGroup_PM2_5 = g_PM2_5.append('g');

            temperaturePlotGroup_PM2_5
                .append("rect")
                .attr("x",0)
                .attr("y",0)
                .attr("height", height_PM2_5-200)
                .attr("width", innerWidth_PM2_5/2 - 70)
                .style("fill", "whitesmoke");



            // AXIS GROUP FOR LEFT PLOT
            const yAxisGroupLeftPlot_PM2_5 = temperaturePlotGroup_PM2_5.append('g').call(yAxis_Plot1_PM2_5);
            yAxisGroupLeftPlot_PM2_5
                .selectAll('.domain')
                .remove();

            yAxisGroupLeftPlot_PM2_5.append('text')
                .attr('class', 'xAxisLabel')
                .attr('x',-innerHeight_PM2_5/2)
                .attr('y', -80)
                .attr('fill', 'black')
                .attr('transform', 'rotate(-90)')
                .attr('text-anchor', 'middle')
                .text(yAxisLable_Plot1_PM2_5);

            const xAxisGroupLeftPlot_PM2_5 = temperaturePlotGroup_PM2_5.append('g').call(xAxis_Plot1_PM2_5)
                .attr('transform', `translate(0, ${innerHeight_PM2_5})`);
            xAxisGroupLeftPlot_PM2_5.select('.domain').remove();

            xAxisGroupLeftPlot_PM2_5.append('text')
                .attr('class', 'xAxisLabel')
                .attr('x', innerWidth_PM2_5/4)
                .attr('y', 80)
                .attr('fill', 'black')
                .text(xAxisLable_Plot1_PM2_5);
// -----------------------------------


// LINE GENERATOR FOR THE LEFT PLOT
            const lineGeneratorLeftPlot_PM2_5 = d3.line()
                .x(d => xScale_Plot1_PM2_5(xValue_Plot1_PM2_5(d)))
                .y(d => yScale_Plot1_PM2_5(yValue_Plot1_PM2_5(d)))
                .curve(d3.curveBasis);

            temperaturePlotGroup_PM2_5.append('path')
                .attr('class', 'line_path_left_plot')
                .attr('d', lineGeneratorLeftPlot_PM2_5(data));

            temperaturePlotGroup_PM2_5.selectAll('rect').data(data)
                .enter().append('circle')
                .attr('cy', d => yScale_Plot1_PM2_5(yValue_Plot1_PM2_5(d)))
                .attr('cx', d => xScale_Plot1_PM2_5(xValue_Plot1_PM2_5(d)))
                .attr('r', circleRadius_PM2_5);

            temperaturePlotGroup_PM2_5.append('text')
                .attr('class', 'title')
                .text(globalTitlePlot1_PM2_5)
                .attr('y', -10);
            // ---------------------------------


        };



        const data_json_PM2_5 = '[(${array_of_all_sensors_info})]';

        const json_PM2_5 = JSON.parse(data_json_PM2_5);

        json_PM2_5.forEach(function(element, index) {
            element.Time = new Date(element['time_info_collected']);
            element.PM2_5 = +element['dust'];

            delete element['time_info_collected'];
            delete element['dust'];
        });

        render_PM2_5(json_PM2_5);

    </script>

    <!-- LA MODALE DECIBELS -->
    <div class="modal fade" id="decibelModal" tabindex="-1" role="dialog" aria-labelledby="decibelModalTitle" aria-hidden="true">
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="decibelModalTitle">Evolution du son en fonction du temps:</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <svg width="1800" height="800" id="svg_decibel_modal">

                    </svg>

                </div>

            </div>
        </div>
    </div>
    <!-- SCRIPT DECIBELS GRAPH D3.JS-->
    <script th:inline="javascript">

        const svg_Decibel = d3.select('#svg_decibel_modal');

        const width_Decibel = +svg_Decibel.attr("width");
        const height_Decibel = +svg_Decibel.attr("height");

        const render_Decibel = data => {


            // TEMPERATURE PLOT
            const globalTitlePlot1_Decibel = "Evolution du Son";
            const yAxisLable_Plot1_Decibel = "Son (Décibel)";
            const yValue_Plot1_Decibel = d => d.Decibel;
            const xValue_Plot1_Decibel = d => d.Time;

            const circleRadius_Decibel = 0;
            const xAxisLable_Plot1_Decibel = "Time";

            const global_margin_Decibel = { top:60, bottom:140, left:150, right:25};
            const marginLeftPlot_Decibel = { top:0, bottom:0, left:0, right:80};


            const innerHeight_Decibel = height_Decibel - global_margin_Decibel.top - global_margin_Decibel.bottom;
            const innerWidth_Decibel = width_Decibel - global_margin_Decibel.left - global_margin_Decibel.right;


            // SCALES FOR LEFT PLOT
            const xScale_Plot1_Decibel = d3.scaleTime()
                .domain(d3.extent(data, xValue_Plot1_Decibel))
                .range([0, innerWidth_Decibel/2 - marginLeftPlot_Decibel.right - marginLeftPlot_Decibel.left])
                .nice();

            const yScale_Plot1_Decibel = d3.scaleLinear()
                .domain(d3.extent(data, yValue_Plot1_Decibel))
                .range([innerHeight_Decibel, 0])
                .nice();
            // ----------------------------------


            const g_Decibel = svg_Decibel.append('g')
                .attr('transform', `translate(${global_margin_Decibel.left}, ${global_margin_Decibel.top})`);


            // AXIS FOR PLOT 1
            const xAxis_Plot1_Decibel = d3.axisBottom(xScale_Plot1_Decibel)
                .tickSize(-innerHeight_Decibel)
                .tickPadding(20);

            const yAxis_Plot1_Decibel = d3.axisLeft(yScale_Plot1_Decibel)
                .tickSize(-innerWidth_Decibel/2 + marginLeftPlot_Decibel.right);
            // ---------------------------------------------


            const temperaturePlotGroup_Decibel = g_Decibel.append('g');

            temperaturePlotGroup_Decibel
                .append("rect")
                .attr("x",0)
                .attr("y",0)
                .attr("height", height_Decibel-200)
                .attr("width", innerWidth_Decibel/2 - 70)
                .style("fill", "whitesmoke");



            // AXIS GROUP FOR LEFT PLOT
            const yAxisGroupLeftPlot_Decibel = temperaturePlotGroup_Decibel.append('g').call(yAxis_Plot1_Decibel);
            yAxisGroupLeftPlot_Decibel
                .selectAll('.domain')
                .remove();

            yAxisGroupLeftPlot_Decibel.append('text')
                .attr('class', 'xAxisLabel')
                .attr('x',-innerHeight_Decibel/2)
                .attr('y', -80)
                .attr('fill', 'black')
                .attr('transform', 'rotate(-90)')
                .attr('text-anchor', 'middle')
                .text(yAxisLable_Plot1_Decibel);

            const xAxisGroupLeftPlot_Decibel = temperaturePlotGroup_Decibel.append('g').call(xAxis_Plot1_Decibel)
                .attr('transform', `translate(0, ${innerHeight_Decibel})`);
            xAxisGroupLeftPlot_Decibel.select('.domain').remove();

            xAxisGroupLeftPlot_Decibel.append('text')
                .attr('class', 'xAxisLabel')
                .attr('x', innerWidth_Decibel/4)
                .attr('y', 80)
                .attr('fill', 'black')
                .text(xAxisLable_Plot1_Decibel);
// -----------------------------------


// LINE GENERATOR FOR THE LEFT PLOT
            const lineGeneratorLeftPlot_Decibel = d3.line()
                .x(d => xScale_Plot1_Decibel(xValue_Plot1_Decibel(d)))
                .y(d => yScale_Plot1_Decibel(yValue_Plot1_Decibel(d)))
                .curve(d3.curveBasis);

            temperaturePlotGroup_Decibel.append('path')
                .attr('class', 'line_path_left_plot')
                .attr('d', lineGeneratorLeftPlot_Decibel(data));

            temperaturePlotGroup_Decibel.selectAll('rect').data(data)
                .enter().append('circle')
                .attr('cy', d => yScale_Plot1_Decibel(yValue_Plot1_Decibel(d)))
                .attr('cx', d => xScale_Plot1_Decibel(xValue_Plot1_Decibel(d)))
                .attr('r', circleRadius_Decibel);

            temperaturePlotGroup_Decibel.append('text')
                .attr('class', 'title')
                .text(globalTitlePlot1_Decibel)
                .attr('y', -10);
            // ---------------------------------


        };



        const data_json_Decibel = '[(${array_of_all_sensors_info})]';

        const json_Decibel = JSON.parse(data_json_Decibel);

        json_Decibel.forEach(function(element, index) {
            element.Time = new Date(element['time_info_collected']);
            element.Temperatures = +element['temperature'];
            element.Humidite = +element['humid'];
            element.Decibel = +element['sound'];

            delete element['time_info_collected'];
            delete element['temperature'];
            delete element['humid'];
            delete element['sound'];
        });

        render_Decibel(json_Decibel);

    </script>

    <!-- LA MODALE MONOXYDE -->
    <div class="modal fade" id="monoxydeModal" tabindex="-1" role="dialog" aria-labelledby="monoxydeModalTitle" aria-hidden="true">
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="monoxydeModalTitle">Temperature en fonction du temps:</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <svg width="1800" height="800" id="svg_monoxyde_modal">

                    </svg>

                </div>

            </div>
        </div>
    </div>
    <!-- SCRIPT MONOXYDE GRAPH D3.JS-->
    <script th:inline="javascript">

        const svg_Monoxyde = d3.select('#svg_monoxyde_modal');

        const width_Monoxyde = +svg_Monoxyde.attr("width");
        const height_Monoxyde = +svg_Monoxyde.attr("height");

        const render_Monoxyde = data => {


            // TEMPERATURE PLOT
            const globalTitlePlot1_Monoxyde = "Evolution du Monoxyde de Carbone";
            const yAxisLable_Plot1_Monoxyde = "CO (en ppm)";
            const yValue_Plot1_Monoxyde = d => d.Monoxyde;
            const xValue_Plot1_Monoxyde = d => d.Time;

            const circleRadius_Monoxyde = 0;
            const xAxisLable_Plot1_Monoxyde = "Time";

            const global_margin_Monoxyde = { top:60, bottom:140, left:150, right:25};
            const marginLeftPlot_Monoxyde = { top:0, bottom:0, left:0, right:80};


            const innerHeight_Monoxyde = height_Monoxyde - global_margin_Monoxyde.top - global_margin_Monoxyde.bottom;
            const innerWidth_Monoxyde = width_Monoxyde - global_margin_Monoxyde.left - global_margin_Monoxyde.right;


            // SCALES FOR LEFT PLOT
            const xScale_Plot1_Monoxyde = d3.scaleTime()
                .domain(d3.extent(data, xValue_Plot1_Monoxyde))
                .range([0, innerWidth_Monoxyde/2 - marginLeftPlot_Monoxyde.right - marginLeftPlot_Monoxyde.left])
                .nice();

            const yScale_Plot1_Monoxyde = d3.scaleLinear()
                .domain(d3.extent(data, yValue_Plot1_Monoxyde))
                .range([innerHeight_Monoxyde, 0])
                .nice();
            // ----------------------------------


            const g_Monoxyde = svg_Monoxyde.append('g')
                .attr('transform', `translate(${global_margin_Monoxyde.left}, ${global_margin_Monoxyde.top})`);


            // AXIS FOR PLOT 1
            const xAxis_Plot1_Monoxyde = d3.axisBottom(xScale_Plot1_Monoxyde)
                .tickSize(-innerHeight_Monoxyde)
                .tickPadding(20);

            const yAxis_Plot1_Monoxyde = d3.axisLeft(yScale_Plot1_Monoxyde)
                .tickSize(-innerWidth_Monoxyde/2 + marginLeftPlot_Monoxyde.right);
            // ---------------------------------------------


            const temperaturePlotGroup_Monoxyde = g_Monoxyde.append('g');

            temperaturePlotGroup_Monoxyde
                .append("rect")
                .attr("x",0)
                .attr("y",0)
                .attr("height", height_Monoxyde-200)
                .attr("width", innerWidth_Monoxyde/2 - 70)
                .style("fill", "whitesmoke");



            // AXIS GROUP FOR LEFT PLOT
            const yAxisGroupLeftPlot_Monoxyde = temperaturePlotGroup_Monoxyde.append('g').call(yAxis_Plot1_Monoxyde);
            yAxisGroupLeftPlot_Monoxyde
                .selectAll('.domain')
                .remove();

            yAxisGroupLeftPlot_Monoxyde.append('text')
                .attr('class', 'xAxisLabel')
                .attr('x',-innerHeight_Monoxyde/2)
                .attr('y', -80)
                .attr('fill', 'black')
                .attr('transform', 'rotate(-90)')
                .attr('text-anchor', 'middle')
                .text(yAxisLable_Plot1_Monoxyde);

            const xAxisGroupLeftPlot_Monoxyde = temperaturePlotGroup_Monoxyde.append('g').call(xAxis_Plot1_Monoxyde)
                .attr('transform', `translate(0, ${innerHeight_Monoxyde})`);
            xAxisGroupLeftPlot_Monoxyde.select('.domain').remove();

            xAxisGroupLeftPlot_Monoxyde.append('text')
                .attr('class', 'xAxisLabel')
                .attr('x', innerWidth_Monoxyde/4)
                .attr('y', 80)
                .attr('fill', 'black')
                .text(xAxisLable_Plot1_Monoxyde);
// -----------------------------------


// LINE GENERATOR FOR THE LEFT PLOT
            const lineGeneratorLeftPlot_Monoxyde = d3.line()
                .x(d => xScale_Plot1_Monoxyde(xValue_Plot1_Monoxyde(d)))
                .y(d => yScale_Plot1_Monoxyde(yValue_Plot1_Monoxyde(d)))
                .curve(d3.curveBasis);

            temperaturePlotGroup_Monoxyde.append('path')
                .attr('class', 'line_path_left_plot')
                .attr('d', lineGeneratorLeftPlot_Monoxyde(data));

            temperaturePlotGroup_Monoxyde.selectAll('rect').data(data)
                .enter().append('circle')
                .attr('cy', d => yScale_Plot1_Monoxyde(yValue_Plot1_Monoxyde(d)))
                .attr('cx', d => xScale_Plot1_Monoxyde(xValue_Plot1_Monoxyde(d)))
                .attr('r', circleRadius_Monoxyde);

            temperaturePlotGroup_Monoxyde.append('text')
                .attr('class', 'title')
                .text(globalTitlePlot1_Monoxyde)
                .attr('y', -10);
            // ---------------------------------


        };



        const data_json_Monoxyde = '[(${array_of_all_sensors_info})]';

        const json_Monoxyde = JSON.parse(data_json_Monoxyde);

        json_Monoxyde.forEach(function(element, index) {
            element.Time = new Date(element['time_info_collected']);
            element.Temperatures = +element['temperature'];
            element.Humidite = +element['humid'];
            element.Monoxyde = +element['CO'];

            delete element['time_info_collected'];
            delete element['temperature'];
            delete element['humid'];
            delete element['CO'];
        });

        render_Monoxyde(json_Monoxyde);

    </script>

    <!-- LA MODALE BENZENE -->
    <div class="modal fade" id="benzeneModal" tabindex="-1" role="dialog" aria-labelledby="benzeneModalTitle" aria-hidden="true">
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="benzeneModalTitle">Benzène en fonction du temps:</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <svg width="1800" height="800" id="svg_benzene_modal">

                    </svg>

                </div>

            </div>
        </div>
    </div>
    <!-- SCRIPT BENZENE GRAPH D3.JS-->
    <script th:inline="javascript">

        const svg_Benzene = d3.select('#svg_benzene_modal');

        const width_Benzene = +svg_Benzene.attr("width");
        const height_Benzene = +svg_Benzene.attr("height");

        const render_Benzene = data => {


            // TEMPERATURE PLOT
            const globalTitlePlot1_Benzene = "Evolution du Benzène";
            const yAxisLable_Plot1_Benzene = "Benzène (en ppb)";
            const yValue_Plot1_Benzene = d => d.Benzene;
            const xValue_Plot1_Benzene = d => d.Time;

            const circleRadius_Benzene = 0;
            const xAxisLable_Plot1_Benzene = "Time";

            const global_margin_Benzene = { top:60, bottom:140, left:150, right:25};
            const marginLeftPlot_Benzene = { top:0, bottom:0, left:0, right:80};


            const innerHeight_Benzene = height_Benzene - global_margin_Benzene.top - global_margin_Benzene.bottom;
            const innerWidth_Benzene = width_Benzene - global_margin_Benzene.left - global_margin_Benzene.right;


            // SCALES FOR LEFT PLOT
            const xScale_Plot1_Benzene = d3.scaleTime()
                .domain(d3.extent(data, xValue_Plot1_Benzene))
                .range([0, innerWidth_Benzene/2 - marginLeftPlot_Benzene.right - marginLeftPlot_Benzene.left])
                .nice();

            const yScale_Plot1_Benzene = d3.scaleLinear()
                .domain(d3.extent(data, yValue_Plot1_Benzene))
                .range([innerHeight_Benzene, 0])
                .nice();
            // ----------------------------------


            const g_Benzene = svg_Benzene.append('g')
                .attr('transform', `translate(${global_margin_Benzene.left}, ${global_margin_Benzene.top})`);


            // AXIS FOR PLOT 1
            const xAxis_Plot1_Benzene = d3.axisBottom(xScale_Plot1_Benzene)
                .tickSize(-innerHeight_Benzene)
                .tickPadding(20);

            const yAxis_Plot1_Benzene = d3.axisLeft(yScale_Plot1_Benzene)
                .tickSize(-innerWidth_Benzene/2 + marginLeftPlot_Benzene.right);
            // ---------------------------------------------


            const temperaturePlotGroup_Benzene = g_Benzene.append('g');

            temperaturePlotGroup_Benzene
                .append("rect")
                .attr("x",0)
                .attr("y",0)
                .attr("height", height_Benzene-200)
                .attr("width", innerWidth_Benzene/2 - 70)
                .style("fill", "whitesmoke");



            // AXIS GROUP FOR LEFT PLOT
            const yAxisGroupLeftPlot_Benzene = temperaturePlotGroup_Benzene.append('g').call(yAxis_Plot1_Benzene);
            yAxisGroupLeftPlot_Benzene
                .selectAll('.domain')
                .remove();

            yAxisGroupLeftPlot_Benzene.append('text')
                .attr('class', 'xAxisLabel')
                .attr('x',-innerHeight_Benzene/2)
                .attr('y', -80)
                .attr('fill', 'black')
                .attr('transform', 'rotate(-90)')
                .attr('text-anchor', 'middle')
                .text(yAxisLable_Plot1_Benzene);

            const xAxisGroupLeftPlot_Benzene = temperaturePlotGroup_Benzene.append('g').call(xAxis_Plot1_Benzene)
                .attr('transform', `translate(0, ${innerHeight_Benzene})`);
            xAxisGroupLeftPlot_Benzene.select('.domain').remove();

            xAxisGroupLeftPlot_Benzene.append('text')
                .attr('class', 'xAxisLabel')
                .attr('x', innerWidth_Benzene/4)
                .attr('y', 80)
                .attr('fill', 'black')
                .text(xAxisLable_Plot1_Benzene);
// -----------------------------------


// LINE GENERATOR FOR THE LEFT PLOT
            const lineGeneratorLeftPlot_Benzene = d3.line()
                .x(d => xScale_Plot1_Benzene(xValue_Plot1_Benzene(d)))
                .y(d => yScale_Plot1_Benzene(yValue_Plot1_Benzene(d)))
                .curve(d3.curveBasis);

            temperaturePlotGroup_Benzene.append('path')
                .attr('class', 'line_path_left_plot')
                .attr('d', lineGeneratorLeftPlot_Benzene(data));

            temperaturePlotGroup_Benzene.selectAll('rect').data(data)
                .enter().append('circle')
                .attr('cy', d => yScale_Plot1_Benzene(yValue_Plot1_Benzene(d)))
                .attr('cx', d => xScale_Plot1_Benzene(xValue_Plot1_Benzene(d)))
                .attr('r', circleRadius_Benzene);

            temperaturePlotGroup_Benzene.append('text')
                .attr('class', 'title')
                .text(globalTitlePlot1_Benzene)
                .attr('y', -10);
            // ---------------------------------


        };



        const data_json_Benzene = '[(${array_of_all_sensors_info})]';

        const json_Benzene = JSON.parse(data_json_Benzene);

        json_Benzene.forEach(function(element, index) {
            element.Time = new Date(element['time_info_collected']);
            element.Temperatures = +element['temperature'];
            element.Humidite = +element['humid'];
            element.Benzene = +element['LMG'];

            delete element['time_info_collected'];
            delete element['temperature'];
            delete element['humid'];
            delete element['LMG'];
        });

        render_Benzene(json_Benzene);

    </script>

    <!-- LA MODALE TOLU -->
    <div class="modal fade" id="toluModal" tabindex="-1" role="dialog" aria-labelledby="toluModalTitle" aria-hidden="true">
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="toluModalTitle">Toluène en fonction du temps:</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <svg width="1800" height="800" id="svg_tolu_modal">

                    </svg>

                </div>

            </div>
        </div>
    </div>
    <!-- SCRIPT TOLU GRAPH D3.JS-->
    <script th:inline="javascript">

        const svg_Tolu = d3.select('#svg_tolu_modal');

        const width_Tolu = +svg_Tolu.attr("width");
        const height_Tolu = +svg_Tolu.attr("height");

        const render_Tolu = data => {


            // TEMPERATURE PLOT
            const globalTitlePlot1_Tolu = "Evolution du Toluène";
            const yAxisLable_Plot1_Tolu = "Toluène (en ppb)";
            const yValue_Plot1_Tolu = d => d.Toluene;
            const xValue_Plot1_Tolu = d => d.Time;

            const circleRadius_Tolu = 0;
            const xAxisLable_Plot1_Tolu = "Time";

            const global_margin_Tolu = { top:60, bottom:140, left:150, right:25};
            const marginLeftPlot_Tolu = { top:0, bottom:0, left:0, right:80};


            const innerHeight_Tolu = height_Tolu - global_margin_Tolu.top - global_margin_Tolu.bottom;
            const innerWidth_Tolu = width_Tolu - global_margin_Tolu.left - global_margin_Tolu.right;


            // SCALES FOR LEFT PLOT
            const xScale_Plot1_Tolu = d3.scaleTime()
                .domain(d3.extent(data, xValue_Plot1_Tolu))
                .range([0, innerWidth_Tolu/2 - marginLeftPlot_Tolu.right - marginLeftPlot_Tolu.left])
                .nice();

            const yScale_Plot1_Tolu = d3.scaleLinear()
                .domain(d3.extent(data, yValue_Plot1_Tolu))
                .range([innerHeight_Tolu, 0])
                .nice();
            // ----------------------------------


            const g_Tolu = svg_Tolu.append('g')
                .attr('transform', `translate(${global_margin_Tolu.left}, ${global_margin_Tolu.top})`);


            // AXIS FOR PLOT 1
            const xAxis_Plot1_Tolu = d3.axisBottom(xScale_Plot1_Tolu)
                .tickSize(-innerHeight_Tolu)
                .tickPadding(20);

            const yAxis_Plot1_Tolu = d3.axisLeft(yScale_Plot1_Tolu)
                .tickSize(-innerWidth_Tolu/2 + marginLeftPlot_Tolu.right);
            // ---------------------------------------------


            const temperaturePlotGroup_Tolu = g_Tolu.append('g');

            temperaturePlotGroup_Tolu
                .append("rect")
                .attr("x",0)
                .attr("y",0)
                .attr("height", height_Tolu-200)
                .attr("width", innerWidth_Tolu/2 - 70)
                .style("fill", "whitesmoke");



            // AXIS GROUP FOR LEFT PLOT
            const yAxisGroupLeftPlot_Tolu = temperaturePlotGroup_Tolu.append('g').call(yAxis_Plot1_Tolu);
            yAxisGroupLeftPlot_Tolu
                .selectAll('.domain')
                .remove();

            yAxisGroupLeftPlot_Tolu.append('text')
                .attr('class', 'xAxisLabel')
                .attr('x',-innerHeight_Tolu/2)
                .attr('y', -80)
                .attr('fill', 'black')
                .attr('transform', 'rotate(-90)')
                .attr('text-anchor', 'middle')
                .text(yAxisLable_Plot1_Tolu);

            const xAxisGroupLeftPlot_Tolu = temperaturePlotGroup_Tolu.append('g').call(xAxis_Plot1_Tolu)
                .attr('transform', `translate(0, ${innerHeight_Tolu})`);
            xAxisGroupLeftPlot_Tolu.select('.domain').remove();

            xAxisGroupLeftPlot_Tolu.append('text')
                .attr('class', 'xAxisLabel')
                .attr('x', innerWidth_Tolu/4)
                .attr('y', 80)
                .attr('fill', 'black')
                .text(xAxisLable_Plot1_Tolu);
// -----------------------------------


// LINE GENERATOR FOR THE LEFT PLOT
            const lineGeneratorLeftPlot_Tolu = d3.line()
                .x(d => xScale_Plot1_Tolu(xValue_Plot1_Tolu(d)))
                .y(d => yScale_Plot1_Tolu(yValue_Plot1_Tolu(d)))
                .curve(d3.curveBasis);

            temperaturePlotGroup_Tolu.append('path')
                .attr('class', 'line_path_left_plot')
                .attr('d', lineGeneratorLeftPlot_Tolu(data));

            temperaturePlotGroup_Tolu.selectAll('rect').data(data)
                .enter().append('circle')
                .attr('cy', d => yScale_Plot1_Tolu(yValue_Plot1_Tolu(d)))
                .attr('cx', d => xScale_Plot1_Tolu(xValue_Plot1_Tolu(d)))
                .attr('r', circleRadius_Tolu);

            temperaturePlotGroup_Tolu.append('text')
                .attr('class', 'title')
                .text(globalTitlePlot1_Tolu)
                .attr('y', -10);
            // ---------------------------------


        };



        const data_json_Tolu = '[(${array_of_all_sensors_info})]';

        const json_Tolu = JSON.parse(data_json_Tolu);

        json_Tolu.forEach(function(element, index) {
            element.Time = new Date(element['time_info_collected']);
            element.Temperatures = +element['temperature'];
            element.Humidite = +element['humid'];
            element.Toluene = +element['tolu'];

            delete element['time_info_collected'];
            delete element['temperature'];
            delete element['humid'];
            delete element['tolu'];
        });

        render_Tolu(json_Tolu);

    </script>

    <!-- LA MODALE formol -->
    <div class="modal fade" id="formolModal" tabindex="-1" role="dialog" aria-labelledby="formolModalTitle" aria-hidden="true">
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="formolModalTitle">Formol en fonction du temps:</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <svg width="1800" height="800" id="svg_formol_modal">

                    </svg>

                </div>

            </div>
        </div>
    </div>
    <!-- SCRIPT FORMOL GRAPH D3.JS-->
    <script th:inline="javascript">

        const svg_Formol = d3.select('#svg_formol_modal');

        const width_Formol = +svg_Formol.attr("width");
        const height_Formol = +svg_Formol.attr("height");

        const render_Formol = data => {


            // TEMPERATURE PLOT
            const globalTitlePlot1_Formol = "Evolution du Formol";
            const yAxisLable_Plot1_Formol = "Formol (en ppm)";
            const yValue_Plot1_Formol = d => d.Formol;
            const xValue_Plot1_Formol = d => d.Time;

            const circleRadius_Formol = 0;
            const xAxisLable_Plot1_Formol = "Time";

            const global_margin_Formol = { top:60, bottom:140, left:150, right:25};
            const marginLeftPlot_Formol = { top:0, bottom:0, left:0, right:80};


            const innerHeight_Formol = height_Formol - global_margin_Formol.top - global_margin_Formol.bottom;
            const innerWidth_Formol = width_Formol - global_margin_Formol.left - global_margin_Formol.right;


            // SCALES FOR LEFT PLOT
            const xScale_Plot1_Formol = d3.scaleTime()
                .domain(d3.extent(data, xValue_Plot1_Formol))
                .range([0, innerWidth_Formol/2 - marginLeftPlot_Formol.right - marginLeftPlot_Formol.left])
                .nice();

            const yScale_Plot1_Formol = d3.scaleLinear()
                .domain(d3.extent(data, yValue_Plot1_Formol))
                .range([innerHeight_Formol, 0])
                .nice();
            // ----------------------------------


            const g_Formol = svg_Formol.append('g')
                .attr('transform', `translate(${global_margin_Formol.left}, ${global_margin_Formol.top})`);


            // AXIS FOR PLOT 1
            const xAxis_Plot1_Formol = d3.axisBottom(xScale_Plot1_Formol)
                .tickSize(-innerHeight_Formol)
                .tickPadding(20);

            const yAxis_Plot1_Formol = d3.axisLeft(yScale_Plot1_Formol)
                .tickSize(-innerWidth_Formol/2 + marginLeftPlot_Formol.right);
            // ---------------------------------------------


            const temperaturePlotGroup_Formol = g_Formol.append('g');

            temperaturePlotGroup_Formol
                .append("rect")
                .attr("x",0)
                .attr("y",0)
                .attr("height", height_Formol-200)
                .attr("width", innerWidth_Formol/2 - 70)
                .style("fill", "whitesmoke");



            // AXIS GROUP FOR LEFT PLOT
            const yAxisGroupLeftPlot_Formol = temperaturePlotGroup_Formol.append('g').call(yAxis_Plot1_Formol);
            yAxisGroupLeftPlot_Formol
                .selectAll('.domain')
                .remove();

            yAxisGroupLeftPlot_Formol.append('text')
                .attr('class', 'xAxisLabel')
                .attr('x',-innerHeight/2)
                .attr('y', -80)
                .attr('fill', 'black')
                .attr('transform', 'rotate(-90)')
                .attr('text-anchor', 'middle')
                .text(yAxisLable_Plot1_Formol);

            const xAxisGroupLeftPlot_Formol = temperaturePlotGroup_Formol.append('g').call(xAxis_Plot1_Formol)
                .attr('transform', `translate(0, ${innerHeight_Formol})`);
            xAxisGroupLeftPlot_Formol.select('.domain').remove();

            xAxisGroupLeftPlot_Formol.append('text')
                .attr('class', 'xAxisLabel')
                .attr('x', innerWidth_Formol/4)
                .attr('y', 80)
                .attr('fill', 'black')
                .text(xAxisLable_Plot1_Formol);
// -----------------------------------


// LINE GENERATOR FOR THE LEFT PLOT
            const lineGeneratorLeftPlot_Formol = d3.line()
                .x(d => xScale_Plot1_Formol(xValue_Plot1_Formol(d)))
                .y(d => yScale_Plot1_Formol(yValue_Plot1_Formol(d)))
                .curve(d3.curveBasis);

            temperaturePlotGroup_Formol.append('path')
                .attr('class', 'line_path_left_plot')
                .attr('d', lineGeneratorLeftPlot_Formol(data));

            temperaturePlotGroup_Formol.selectAll('rect').data(data)
                .enter().append('circle')
                .attr('cy', d => yScale_Plot1_Formol(yValue_Plot1_Formol(d)))
                .attr('cx', d => xScale_Plot1_Formol(xValue_Plot1_Formol(d)))
                .attr('r', circleRadius_Formol);

            temperaturePlotGroup_Formol.append('text')
                .attr('class', 'title')
                .text(globalTitlePlot1_Formol)
                .attr('y', -10);
            // ---------------------------------


        };



        const data_json_Formol = '[(${array_of_all_sensors_info})]';

        const json_Formol = JSON.parse(data_json_Formol);

        json_Formol.forEach(function(element, index) {
            element.Time = new Date(element['time_info_collected']);
            element.Temperatures = +element['temperature'];
            element.Humidite = +element['humid'];
            element.Formol = +element['formol'];

            delete element['time_info_collected'];
            delete element['temperature'];
            delete element['humid'];
            delete element['formol'];
        });

        render_Formol(json_Formol);

    </script>



<!--SCRIPT POUR DOWNLOAD LE CSV -->
    <script th:each="salle:${campus_with_the_selected_salle.getList_salles()}" th:inline="javascript">
        function download_csv() {
            const nom_salle = [[${salle.getSalle_name()}]];
            const heure_min_debut = [[${debut_graph_heure}]];
            const date_heure_debut = [[${debut_graph_date}]] + "_" + heure_min_debut.replace(":", "h") ;
            const heure_min_fin = [[${fin_graph_heure}]];
            const date_heure_fin = [[${fin_graph_date}]] + "_" + heure_min_fin.replace(':', 'h') ;
            const titre_csv = nom_salle + "_" + date_heure_debut + "_" + date_heure_fin + ".csv";

            const data_json_all = '[(${array_of_all_sensors_info})]';

            const json_data_all = JSON.parse(data_json_all);

            const header = Object.keys(json_data_all[0]);

            console.log(header);
            const replacer = (key, value) => value === null ? '' : value;
            let csv = json_data_all.map(row => header.map(fieldName => JSON.stringify(row[fieldName], replacer)).join(','));
            csv.unshift(header.join(','));
            csv = csv.join('\r\n');
            console.log(csv);

            console.log(csv);
            var hiddenElement = document.createElement('a');
            hiddenElement.href = 'data:text/csv;charset=utf-8,' + encodeURI(csv);
            hiddenElement.target = '_blank';
            hiddenElement.download = titre_csv;
            hiddenElement.click();
        }

    </script>


    <!--STYLE POUR LE TEST VISU AVEC D3.JS-->
    <style>
/*Makes the modal wider*/
        @media (min-width: 768px) {
            .modal-xl {
                width: 90%;
                max-width:1200px;
            }
        }

        circle{
            fill:tomato;
            opacity:0.5;
        }

        text {
            font-size: 1.2em;
            font-family: sans-serif;
        }

        .tick text{
            font-size: 2.4em;
            color : #635F5D;
        }

        .tick line {
            stroke: #C0C0BB;
        }

        .xAxisLabel{
            font-size:4em;
            fill:#635F5D;
        }

        .title{
            font-size:3em;
            fill:#635F5D;
        }

        .line_path_left_plot{
            fill:none;
            stroke:tomato;
            stroke-width:3;
            stroke-linejoin:round;
        }
        .line_path_right_plot{
            fill:none;
            stroke:steelblue;
            stroke-width:3;
            stroke-linejoin:round;
        }

    </style>



    <!-- PARTIE FORMULE DES TANGENTES AND CO -->
    <section class="row">
        <div class="col-xs-4 col-sm-4 col-md-4">

            Formule de la tangente:   <button class="formule"><i class="fa fa-flask"></i></button>
        </div>

        <div class="col-xs-4 col-sm-4 col-md-4">
            Formule de pythagore:   <button class="formule"><i class="fa fa-flask"></i></button>
        </div>

        <div class="col-xs-4 col-sm-4 col-md-4">
            Formule de thales:   <button class="formule"><i class="fa fa-flask"></i></button>
        </div>
    </section>

    <br/> <br>
    <!-- PARTIE EXTRAIRE LES DONNES SOUS FORMAT CSV -->
    <section class="row">
        <br/>
        <p style="margin-top: 15px;"> Si vous souhaitez extraire les données capteurs dans un Excel sur ce laps de temps:</p>
        <button onclick="download_csv()" id="extraire_data_csv" name="extraire_data_csv" style="margin-left: 15px;" class="btn btn-secondary">Extraire</button>
    </section>
</div>

<br/>
<br/>

</body>
<style>

    #aa{
        background-color: steelblue;
    }
    p  {
        font-size: 17px
    }
    legend{
        font-size: 25px
    }

    .logo3
    {
        width: 70%;
    }

    .image
    {


        width: 100%;
        border-radius: 20px;
        border:2px lightgrey solid;


    }
    .image1
    {


        width: 100%;
        border-radius: 20px;
        border:2px lightgrey solid;

    }
    .l2

    {


        width: 100%;

    }


    [class*="col-"] {
        /*background-color: lightgreen;
         border: 2px solid black;*/
        border-radius: 6px;
        line-height: 26px;
        text-align: left;
    }
    .logo_text {
        text-align: left;
        vertical-align: bottom;
        /*        display: flex;
                justify-content: */
    }
    blockquote {
        text-align: left;
    }
    /*      .logo_text b{
            position: absolute;
            bottom: 0;
          }*/
    /*      .logo_img img{
            position: absolute;
            right: 0;

          }
    */

    span{
        font-size: 35px

    }
    body {
        font-family: Arial, Helvetica, sans-serif;
    }
    .custom-checkbox {
        /* Presentation */
        font-size: 50px
    }

    /* Required Styling */

    label input[type="checkbox"] {
        display: none;
    }

    .custom-checkbox {
        margin-left: 2em;
        position: relative;
        cursor: pointer;
    }

    .custom-checkbox .glyphicon {
        color: gold;
        position: absolute;
        top: 0.4em;
        left: -1.25em;
        font-size: 0.75em;
    }

    .custom-checkbox .glyphicon-star-empty {
        color: gray;
    }

    .custom-checkbox .glyphicon-star {
        opacity: 0;
        transition: opacity 0.2s ease-in-out;
    }

    .custom-checkbox:hover .glyphicon-star{
        opacity: 0.5;
    }

    .custom-checkbox input[type="checkbox"]:checked ~ .glyphicon-star {
        opacity: 1;
    }


    .navbar {
        /*overflow: hidden;*/
        background-color: #0DA2E0;
    }

    .navbar a {
        float: left;
        font-size: 16px;
        color: white;
        text-align: center;
        padding: 14px 16px;
        text-decoration: none;
    }

    /*.dropdown {
      float: left;
      overflow: hidden;
    }*/

    .dropdown .dropbtn {
        font-size: 16px;
        border: none;
        outline: none;
        color: white;
        padding: 14px 16px;
        background-color: inherit;
        font-family: inherit;
        margin: 0;
    }

    /*.navbar a:hover, .dropdown:hover .dropbtn {
      background-color: red;
    }*/

    .dropdown-content {
        display: none;
        position: absolute;
        background-color: #f9f9f9;
        min-width: 160px;
        box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
        z-index: 1;
    }

    .dropdown-content a {
        float: none;
        color: black;
        padding: 12px 16px;
        text-decoration: none;
        display: block;
        text-align: left;
    }

    .dropdown-content a:hover {
        background-color: #ddd;
    }

    .dropdown:hover .dropdown-content {
        display: block;
    }


    ul.mail-list{
        padding:0;
        margin:0;
        list-style:none;
        margin-top:20px;
    }
    ul.mail-list li a{
        display:block;
        border-bottom:1px dotted #CFCFCF;
        padding:20px;
        text-decoration:none;
    }
    ul.mail-list li:last-child a{
        border-bottom:none;
    }
    ul.mail-list li a:hover{
        background-color:#DBF9FF;
    }
    ul.mail-list li span{
        display:block;
    }
    ul.mail-list li span.mail-sender{
        font-weight:600;
        color:black;
    }
    ul.mail-list li span.mail-subject{
        color:black;
    }
    ul.mail-list li span.mail-message-preview{
        display:block;
        color:black;
    }
    .mail-search{
        border-bottom-color:#7FBCC9!important;
    }
    .mail-message-preview{
        font-size: 18px;
    }
    .mail-subject{
        font-size: 22px ;
        font-weight: bold;
    }
    .mail-sender{
        font-size: 30px ;
        font-weight: bold;

    }


    /* Gray Scale */
    .hover08 a img {
        -webkit-filter: grayscale(100%);
        filter: grayscale(100%);
        -webkit-transition: .3s ease-in-out;
        transition: .3s ease-in-out;
    }
    .hover08 a:hover img {
        -webkit-filter: grayscale(0);
        filter: grayscale(0);
    }

    .hover01 a img {
        -webkit-transform: scale(1);
        transform: scale(1);
        -webkit-transition: .3s ease-in-out;
        transition: .3s ease-in-out;
    }
    .hover01 a:hover img {
        -webkit-transform: scale(1.3);
        transform: scale(1.3);
    }
    /* Zoom In #2 */
    .hover02 a img {
        width: 300px;
        height: auto;
        -webkit-transition: .3s ease-in-out;
        transition: .3s ease-in-out;
    }
    .hover02 a:hover img {
        width: 350px;
    }

    .bouton{
        height: 37px;
        line-height: 10px;
        /* margin: 1px;*/


    }

</style>
</html>